<div class="container-xl">
  <div class="table-responsive">
    <div class="table-wrapper">
      <div class="table-title">
        <div class="row">
          <div class="mb-2 flex justify-between">
            <h2 class="text-bold text-3xl">Manage Contacts</h2>
            <div class="p-2 space-x-2 text-white flex">
              <button type="button" class="bg-green-400 rounded-md p-2">Print Report</button>

              <a href="#addEmployeeModal" class="bg-blue-500 justify-center flex rounded-md p-2 space-x-1" data-toggle="modal">
                  <i class="material-icons">&#xE147;</i>
                  <span>New Contact</span>
              </a>
            </div>
          </div>

          <mat-form-field>
            <mat-label>Filter</mat-label>
            <input
              matInput
              (keyup)="applyFilter($event)"
              placeholder="filter contacts"
              #input
            />
          </mat-form-field>

          <!-- Add ngIf to check if contacts$ is defined -->

          <ng-container
            *ngIf="appState$ | async as appState"
            [ngSwitch]="appState.dataState"
          >
            <ng-container *ngSwitchCase="DataState.LOADING_STATE">
              <div class="col-md-12 single-note-item text-center">
                <div class="spinner-border text-info" role="status"></div>
              </div>
            </ng-container>
            <ng-container *ngSwitchCase="DataState.LOADED_STATE">
              <!-- Mat-Table Section -->
              <div class="mat-elevation-z8">
                <table mat-table [dataSource]="dataSource$" matSort>
                  <!-- ID Column -->
                  <ng-container matColumnDef="id">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                      ID
                    </th>
                    <td mat-cell *matCellDef="let row">{{ row.id }}</td>
                  </ng-container>

                  <!-- firstName Column -->
                  <ng-container matColumnDef="firstName">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                      First Name
                    </th>
                    <td mat-cell *matCellDef="let row">{{ row.firstName }}</td>
                  </ng-container>

                  <!-- lastName Column -->
                  <ng-container matColumnDef="lastName">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                      Last Name
                    </th>
                    <td mat-cell *matCellDef="let row">{{ row.lastName }}</td>
                  </ng-container>

                  <!-- email Column -->
                  <ng-container matColumnDef="email">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                      Email
                    </th>
                    <td mat-cell *matCellDef="let row">{{ row.email }}</td>
                  </ng-container>

                  <!-- phoneNumber Column -->
                  <ng-container matColumnDef="phoneNumber">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                      PhoneNumber
                    </th>
                    <td mat-cell *matCellDef="let row">
                      {{ row.phoneNumber }}
                    </td>
                  </ng-container>

                  <!-- address Column -->
                  <ng-container matColumnDef="address">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                      Address
                    </th>
                    <td mat-cell *matCellDef="let row">{{ row.address }}</td>
                  </ng-container>

                  <!-- username Column -->
                  <ng-container matColumnDef="username">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                      Username
                    </th>
                    <td mat-cell *matCellDef="let row">{{ row.username }}</td>
                  </ng-container>

                  <!-- actions Column -->
                  <ng-container matColumnDef="actions">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                      Actions
                    </th>
                    <td mat-cell *matCellDef="let row">
                       <div class="space-x-2 cursor-pointer">
                        <i class="fa fa-trash" aria-hidden="true"></i>
                        <i class="fa fa-eye" aria-hidden="true"></i>
                        <i class="fa fa-pencil-square-o " aria-hidden="true"></i>
                       </div>
                    </td>
                  </ng-container>

                  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                  <tr
                    mat-row
                    *matRowDef="let row; columns: displayedColumns"
                  ></tr>

                  <!-- Row shown when there is no matching data. -->
                  <tr class="mat-row" *matNoDataRow>
                    <td class="mat-cell" colspan="4">
                      No data matching the filter "{{ input.value }}"
                    </td>
                  </tr>
                </table>

                <mat-paginator
                  [pageSizeOptions]="[5, 10, 25, 100]"
                  aria-label="Select page of users"
                ></mat-paginator>
              </div>
            </ng-container>

            <ng-container *ngSwitchCase="DataState.ERROR_STATE">
              <div class="alert-danger">
                {{ appState.error }}
              </div>
            </ng-container>
          </ng-container>
        </div>
      </div>
    </div>
  </div>
</div>
